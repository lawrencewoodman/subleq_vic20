;========================================================
;  Rock, Paper, Scissors game using SUBLEQ
;  Author  Lawrence woodman <lwoodman@vlifesystems.com>
;  Date    25th June 2020
;========================================================

; Basic Stub
BSPACE    = $14               ; Backspace character
COLON     = $3A               ; Colon character
TOK_REM   = $8F               ; REM token
TOK_SYS   = $9E               ; SYS token


            .byt  $01, $12    ; Load address ($1201)

            * = $1201
            ; TODO get rid of basic loader as more appropriate to just SYS into
            .word basicEnd    ; Next Line link, here end of Basic program
            .word 1           ; The line number for the SYS statement
            .byt  TOK_SYS     ; SYS token
            .asc  " "
            .asc  "4662"      ; Start of machine language
            .byt  COLON       ; Colon character
            .byt  TOK_REM     ; REM token
            .asc  " "
            .dsb  15,BSPACE   ; Backspace characters to make line invisible
            .asc  "(C) 2020 LORRY WOODMAN"
            .byt  0           ; End of Basic line
basicEnd    .word 0           ; End of Basic program

            jmp main

SL_MEM      = SL_prog

; Include the SUBLEQ emulator
#include "subleq.a65"


main        jsr SL_run
            rts


SL_prog     .word 3,3,4,0,3,3,10,45,13,0
            .word 3,3,194,82,79,67,75,44,32,80
            .word 65,80,69,82,44,32,83,67,73,83
            .word 83,79,82,83,13,82,44,32,80,44
            .word 32,83,44,32,79,82,32,81,32,84
            .word 79,32,81,85,73,84,58,32,13,0
            .word 89,79,85,82,32,71,85,69,83,83
            .word 58,32,0,67,79,77,80,85,84,69
            .word 82,32,71,85,69,83,83,58,32,0
            .word 13,73,78,86,65,76,73,68,32,75
            .word 69,89,13,0,67,79,77,80,85,84
            .word 69,82,32,87,73,78,83,0,89,79
            .word 85,32,87,73,78,0,68,82,65,87
            .word 0,83,67,79,82,69,32,45,32,89
            .word 79,85,58,32,0,32,32,32,67,79
            .word 77,80,85,84,69,82,58,32,0,0
            .word 0,1,2,0,0,32,32,0,82,80
            .word 83,81,83,175,175,82,80,83,80,83
            .word 82,82,80,83,82,80,83,80,83,82
            .word 83,82,80,0,207,207,197,173,3,200
            .word 3,207,203,3,3,206,3,0,212,3
            .word 3,224,173,173,215,174,3,218,3,173
            .word 221,3,3,224,272,272,227,173,3,230
            .word 3,272,233,3,3,236,167,3,239,3
            .word 272,242,3,3,245,260,260,248,272,3
            .word 251,3,260,254,3,3,257,172,172,260
            .word 0,3,263,3,172,266,2251,173,269,3
            .word 3,273,0,285,285,276,295,295,279,300
            .word 285,282,300,295,285,8,-1,288,2253,285
            .word 291,2253,295,294,2254,8,301,3,3,285
            .word -8,313,313,304,323,323,307,328,313,310
            .word 328,323,313,13,-1,316,2253,313,319,2253
            .word 323,322,2254,13,329,3,3,313,-13,-1
            .word 165,332,344,344,335,354,354,338,359,344
            .word 341,359,354,344,8,-1,347,2253,344,350
            .word 2253,354,353,2254,8,360,3,3,344,-8
            .word 393,393,363,165,3,366,3,393,369,3
            .word 3,372,171,393,375,3,393,381,3,3
            .word 390,393,3,387,3,3,390,3,3,2248
            .word 3,3,394,0,427,427,397,165,3,400
            .word 3,427,403,3,3,406,168,427,409,3
            .word 427,415,3,3,502,427,3,421,3,3
            .word 502,3,3,424,3,3,428,0,167,167
            .word 431,464,464,434,172,3,437,3,464,440
            .word 3,3,443,168,464,446,3,464,452,3
            .word 3,461,464,3,458,3,3,461,3,3
            .word 773,3,3,465,0,498,498,468,172,3
            .word 471,3,498,474,3,3,477,169,498,480
            .word 3,498,486,3,3,495,498,3,492,3
            .word 3,495,3,3,755,3,3,499,0,3
            .word 3,788,535,535,505,165,3,508,3,535
            .word 511,3,3,514,169,535,517,3,535,523
            .word 3,3,613,535,3,529,3,3,613,3
            .word 3,532,3,3,536,0,167,167,539,2253
            .word 167,542,575,575,545,172,3,548,3,575
            .word 551,3,3,554,168,575,557,3,575,563
            .word 3,3,572,575,3,569,3,3,572,3
            .word 3,788,3,3,576,0,609,609,579,172
            .word 3,582,3,609,585,3,3,588,169,609
            .word 591,3,609,597,3,3,606,609,3,603
            .word 3,3,606,3,3,773,3,3,610,0
            .word 3,3,755,646,646,616,165,3,619,3
            .word 646,622,3,3,625,170,646,628,3,646
            .word 634,3,3,724,646,3,640,3,3,724
            .word 3,3,643,3,3,647,0,167,167,650
            .word 2252,167,653,686,686,656,172,3,659,3
            .word 686,662,3,3,665,168,686,668,3,686
            .word 674,3,3,683,686,3,680,3,3,683
            .word 3,3,755,3,3,687,0,720,720,690
            .word 172,3,693,3,720,696,3,3,699,169
            .word 720,702,3,720,708,3,3,717,720,3
            .word 714,3,3,717,3,3,788,3,3,721
            .word 0,3,3,773,736,736,727,746,746,730
            .word 751,736,733,751,746,736,90,-1,739,2253
            .word 736,742,2253,746,745,2254,90,752,3,3
            .word 736,-90,3,3,194,159,159,758,161,3
            .word 761,3,159,764,3,3,767,2253,164,770
            .word 3,3,803,159,159,776,160,3,779,3
            .word 159,782,3,3,785,3,3,803,159,159
            .word 791,162,3,794,3,159,797,3,3,800
            .word 2253,163,803,815,815,806,825,825,809,830
            .word 815,812,830,825,815,60,-1,818,2253,815
            .word 821,2253,825,824,2254,60,831,3,3,815
            .word -60,165,-1,834,846,846,837,856,856,840
            .word 861,846,843,861,856,846,8,-1,849,2253
            .word 846,852,2253,856,855,2254,8,862,3,3
            .word 846,-8,874,874,865,884,884,868,889,874
            .word 871,889,884,874,73,-1,877,2253,874,880
            .word 2253,884,883,2254,73,890,3,3,874,-73
            .word 172,-1,893,905,905,896,915,915,899,920
            .word 905,902,920,915,905,8,-1,908,2253,905
            .word 911,2253,915,914,2254,8,921,3,3,905
            .word -8,954,954,924,161,3,927,3,954,930
            .word 3,3,933,159,954,936,3,954,942,3
            .word 3,986,954,3,948,3,3,986,3,3
            .word 951,3,3,955,0,967,967,958,977,977
            .word 961,982,967,964,982,977,967,104,-1,970
            .word 2253,967,973,2253,977,976,2254,104,983,3
            .word 3,967,-104,3,3,1079,1019,1019,989,162
            .word 3,992,3,1019,995,3,3,998,159,1019
            .word 1001,3,1019,1007,3,3,1051,1019,3,1013
            .word 3,3,1051,3,3,1016,3,3,1020,0
            .word 1032,1032,1023,1042,1042,1026,1047,1032,1029,1047
            .word 1042,1032,118,-1,1035,2253,1032,1038,2253,1042
            .word 1041,2254,118,1048,3,3,1032,-118,3,3
            .word 1079,1063,1063,1054,1073,1073,1057,1078,1063,1060
            .word 1078,1073,1063,126,-1,1066,2253,1063,1069,2253
            .word 1073,1072,2254,126,1079,3,3,1063,-126,1091
            .word 1091,1082,1101,1101,1085,1106,1091,1088,1106,1101
            .word 1091,8,-1,1094,2253,1091,1097,2253,1101,1100
            .word 2254,8,1107,3,3,1091,-8,1119,1119,1110
            .word 1129,1129,1113,1134,1119,1116,1134,1129,1119,131
            .word -1,1122,2253,1119,1125,2253,1129,1128,2254,131
            .word 1135,3,3,1119,-131,1645,1645,1138,1644,3
            .word 1141,3,1645,1144,3,3,1147,1643,1643,1150
            .word 163,3,1153,3,1643,1156,3,3,1159,163
            .word 3,1165,3,3,1168,3,3,1193,3,3
            .word 1171,7,-1,1174,1192,1192,1177,1643,3,1180
            .word 3,1192,1183,1643,1643,1186,1192,1643,1189,3
            .word 3,1193,0,1642,1642,1196,1643,3,1199,3
            .word 1642,1202,3,3,1205,1645,1642,1208,1642,3
            .word 1214,3,3,1217,3,3,1226,3,3,1220
            .word 1646,-1,1223,3,3,1464,1642,1642,1229,1643
            .word 3,1232,3,1642,1235,3,3,1238,1645,3
            .word 1244,3,3,1247,3,3,1288,3,3,1250
            .word 1268,1268,1253,1414,3,1256,3,1268,1259,1414
            .word 1414,1262,1268,1414,1265,3,3,1269,0,1287
            .word 1287,1272,1645,3,1275,3,1287,1278,1645,1645
            .word 1281,1287,1645,1284,3,3,1288,0,1642,3
            .word 1294,3,3,1297,3,3,1338,3,3,1300
            .word 1318,1318,1303,1414,3,1306,3,1318,1309,1414
            .word 1414,1312,1318,1414,1315,3,3,1319,0,1337
            .word 1337,1322,1642,3,1325,3,1337,1328,1642,1642
            .word 1331,1337,1642,1334,3,3,1338,0,1359,1359
            .word 1341,3,3,1344,3,1359,1347,3,3,1350
            .word 1645,1642,1360,2253,1359,1356,3,3,1350,0
            .word 2253,1642,1372,2255,1642,1366,2253,1359,1369,3
            .word 3,1384,2255,1642,1375,1645,3,1378,3,1642
            .word 1381,3,3,1384,1643,1643,1387,1642,3,1390
            .word 3,1643,1393,3,3,1396,1642,1642,1399,1359
            .word 3,1402,3,1642,1405,3,3,1408,2254,1414
            .word 1415,3,3,1440,1,2253,1414,1418,2253,1414
            .word 1421,1439,1439,1424,1642,3,1427,3,1439,1430
            .word 1642,1642,1433,1439,1642,1436,3,3,1440,0
            .word 1647,1647,1443,1642,3,1446,3,1647,1449,3
            .word 3,1452,1646,3,1455,3,1647,1458,3,3
            .word 1461,1647,-1,1464,2256,3,1470,3,3,1473
            .word 3,3,1514,3,3,1476,1494,1494,1479,1610
            .word 3,1482,3,1494,1485,1610,1610,1488,1494,1610
            .word 1491,3,3,1495,0,1513,1513,1498,2256,3
            .word 1501,3,1513,1504,2256,2256,1507,1513,2256,1510
            .word 3,3,1514,0,1645,3,1520,3,3,1523
            .word 3,3,1564,3,3,1526,1544,1544,1529,1610
            .word 3,1532,3,1544,1535,1610,1610,1538,1544,1610
            .word 1541,3,3,1545,0,1563,1563,1548,1645,3
            .word 1551,3,1563,1554,1645,1645,1557,1563,1645,1560
            .word 3,3,1564,0,1585,1585,1567,3,3,1570
            .word 3,1585,1573,3,3,1576,2256,1645,1586,2253
            .word 1585,1582,3,3,1576,0,2253,1645,1592,2253
            .word 1585,1592,1645,1645,1595,1585,3,1598,3,1645
            .word 1601,3,3,1604,2254,1610,1611,3,3,1636
            .word 1,2253,1610,1614,2253,1610,1617,1635,1635,1620
            .word 1645,3,1623,3,1635,1626,1645,1645,1629,1635
            .word 1645,1632,3,3,1636,0,3,1645,1648,3
            .word 3,1193,0,0,10000,0,48,0,1660,1660
            .word 1651,1670,1670,1654,1675,1660,1657,1675,1670,1660
            .word 8,-1,1663,2253,1660,1666,2253,1670,1669,2254
            .word 8,1676,3,3,1660,-8,1688,1688,1679,1698
            .word 1698,1682,1703,1688,1685,1703,1698,1688,145,-1
            .word 1691,2253,1688,1694,2253,1698,1697,2254,145,1704
            .word 3,3,1688,-145,2214,2214,1707,2213,3,1710
            .word 3,2214,1713,3,3,1716,2212,2212,1719,164
            .word 3,1722,3,2212,1725,3,3,1728,164,3
            .word 1734,3,3,1737,3,3,1762,3,3,1740
            .word 7,-1,1743,1761,1761,1746,2212,3,1749,3
            .word 1761,1752,2212,2212,1755,1761,2212,1758,3,3
            .word 1762,0,2211,2211,1765,2212,3,1768,3,2211
            .word 1771,3,3,1774,2214,2211,1777,2211,3,1783
            .word 3,3,1786,3,3,1795,3,3,1789,2215
            .word -1,1792,3,3,2033,2211,2211,1798,2212,3
            .word 1801,3,2211,1804,3,3,1807,2214,3,1813
            .word 3,3,1816,3,3,1857,3,3,1819,1837
            .word 1837,1822,1983,3,1825,3,1837,1828,1983,1983
            .word 1831,1837,1983,1834,3,3,1838,0,1856,1856
            .word 1841,2214,3,1844,3,1856,1847,2214,2214,1850
            .word 1856,2214,1853,3,3,1857,0,2211,3,1863
            .word 3,3,1866,3,3,1907,3,3,1869,1887
            .word 1887,1872,1983,3,1875,3,1887,1878,1983,1983
            .word 1881,1887,1983,1884,3,3,1888,0,1906,1906
            .word 1891,2211,3,1894,3,1906,1897,2211,2211,1900
            .word 1906,2211,1903,3,3,1907,0,1928,1928,1910
            .word 3,3,1913,3,1928,1916,3,3,1919,2214
            .word 2211,1929,2253,1928,1925,3,3,1919,0,2253
            .word 2211,1941,2255,2211,1935,2253,1928,1938,3,3
            .word 1953,2255,2211,1944,2214,3,1947,3,2211,1950
            .word 3,3,1953,2212,2212,1956,2211,3,1959,3
            .word 2212,1962,3,3,1965,2211,2211,1968,1928,3
            .word 1971,3,2211,1974,3,3,1977,2254,1983,1984
            .word 3,3,2009,1,2253,1983,1987,2253,1983,1990
            .word 2008,2008,1993,2211,3,1996,3,2008,1999,2211
            .word 2211,2002,2008,2211,2005,3,3,2009,0,2216
            .word 2216,2012,2211,3,2015,3,2216,2018,3,3
            .word 2021,2215,3,2024,3,2216,2027,3,3,2030
            .word 2216,-1,2033,2256,3,2039,3,3,2042,3
            .word 3,2083,3,3,2045,2063,2063,2048,2179,3
            .word 2051,3,2063,2054,2179,2179,2057,2063,2179,2060
            .word 3,3,2064,0,2082,2082,2067,2256,3,2070
            .word 3,2082,2073,2256,2256,2076,2082,2256,2079,3
            .word 3,2083,0,2214,3,2089,3,3,2092,3
            .word 3,2133,3,3,2095,2113,2113,2098,2179,3
            .word 2101,3,2113,2104,2179,2179,2107,2113,2179,2110
            .word 3,3,2114,0,2132,2132,2117,2214,3,2120
            .word 3,2132,2123,2214,2214,2126,2132,2214,2129,3
            .word 3,2133,0,2154,2154,2136,3,3,2139,3
            .word 2154,2142,3,3,2145,2256,2214,2155,2253,2154
            .word 2151,3,3,2145,0,2253,2214,2161,2253,2154
            .word 2161,2214,2214,2164,2154,3,2167,3,2214,2170
            .word 3,3,2173,2254,2179,2180,3,3,2205,1
            .word 2253,2179,2183,2253,2179,2186,2204,2204,2189,2214
            .word 3,2192,3,2204,2195,2214,2214,2198,2204,2214
            .word 2201,3,3,2205,0,3,2214,2217,3,3
            .word 1762,0,0,10000,0,48,0,2229,2229,2220
            .word 2239,2239,2223,2244,2229,2226,2244,2239,2229,8
            .word -1,2232,2253,2229,2235,2253,2239,2238,2254,8
            .word 2245,3,3,2229,-8,3,3,194,3,3
            .word -1,-3,-2,-1,0,1,10
