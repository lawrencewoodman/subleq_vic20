;========================================================
;  Test SUBLEQ sble command
;  Author  Lawrence woodman <lwoodman@vlifesystems.com>
;  Date    21st June 2020
;========================================================

; Basic Stub
BSPACE    = $14               ; Backspace character
COLON     = $3A               ; Colon character
TOK_REM   = $8F               ; REM token
TOK_SYS   = $9E               ; SYS token

; TODO Check start location is appropriate

            .byt  $01, $12    ; Load address ($1201)

            * = $1201
            ; TODO get rid of basic loader as more appropriate to just SYS into
            .word basicEnd    ; Next Line link, here end of Basic program
            .word 1           ; The line number for the SYS statement
            .byt  TOK_SYS     ; SYS token
            .asc  " "
            .asc  "4662"      ; Start of machine language
            .byt  COLON       ; Colon character
            .byt  TOK_REM     ; REM token
            .asc  " "
            .dsb  15,BSPACE   ; Backspace characters to make line invisible
            .asc  "(C) 2020 LORRY WOODMAN"
            .byt  0           ; End of Basic line
basicEnd    .word 0           ; End of Basic program

            jmp main

SL_MEM      = SL_prog

; Include the SUBLEQ emulator
#include "subleq.a65"


main        jsr SL_run
            rts


SL_prog     .word 3,3,4,0,3,3,10,45,13,0
            .word 3,3,24,102,13,0,46,0,32,0
            .word 47,13,0,0,23,23,27,95,3,30
            .word 3,23,33,3,3,36,48,48,39,58
            .word 58,42,63,48,45,63,58,48,380,-1
            .word 51,823,48,54,823,58,57,824,380,64
            .word 3,3,48,-380,76,76,67,86,86,70
            .word 91,76,73,91,86,76,18,-1,79,823
            .word 76,82,823,86,85,824,18,92,3,3
            .word 76,-18,3,3,96,417,824,341,389,825
            .word 341,102,213,213,105,340,3,108,3,213
            .word 111,3,3,114,214,214,117,375,3,120
            .word 3,214,123,3,3,126,215,215,129,376
            .word 3,132,3,215,135,3,3,138,3,213
            .word 216,189,189,144,215,3,147,3,189,150
            .word 3,3,153,190,190,156,215,3,159,3
            .word 190,162,3,3,165,192,192,168,214,3
            .word 171,3,192,174,3,3,177,196,196,180
            .word 215,3,183,3,196,186,3,3,189,0
            .word 0,192,0,3,195,3,0,198,3,3
            .word 201,823,214,204,823,215,207,825,213,210
            .word 3,3,138,0,0,0,340,3,219,3
            .word 375,222,3,3,225,377,378,228,307,307
            .word 231,378,3,234,3,307,237,3,3,240
            .word 308,308,243,379,3,246,3,308,249,3
            .word 3,252,307,308,258,3,3,264,823,308
            .word 264,3,3,309,276,276,267,286,286,270
            .word 291,276,273,291,286,276,13,-1,279,823
            .word 276,282,823,286,285,824,13,292,3,3
            .word 276,-13,306,306,295,23,3,298,3,306
            .word 301,3,3,304,3,3,0,0,0,321
            .word 321,312,331,331,315,336,321,318,336,331
            .word 321,16,-1,324,823,321,327,823,331,330
            .word 824,16,337,3,3,321,-16,3,3,96
            .word 3,11,5,5,0,-1,-4,-3,-2,5
            .word 7,2,5,3,5,-2,-7,5,2,-3
            .word -1,32766,32767,-1,32767,32768,-1,65534,65535,-1
            .word 65535,0,1,0,65535,342,377,0,0,0
            .word 115,98,108,101,95,115,117,98,0,401
            .word 401,392,411,411,395,416,401,398,416,411
            .word 401,20,-1,404,823,401,407,823,411,410
            .word 824,20,417,3,3,401,-20,23,23,420
            .word 488,3,423,3,23,426,3,3,429,441
            .word 441,432,451,451,435,456,441,438,456,451
            .word 441,780,-1,444,823,441,447,823,451,450
            .word 824,780,457,3,3,441,-780,469,469,460
            .word 479,479,463,484,469,466,484,479,469,18
            .word -1,472,823,469,475,823,479,478,824,18
            .word 485,3,3,469,-18,3,3,489,820,824
            .word 743,792,825,743,495,606,606,498,742,3
            .word 501,3,606,504,3,3,507,607,607,510
            .word 774,3,513,3,607,516,3,3,519,608
            .word 608,522,775,3,525,3,608,528,3,3
            .word 531,3,606,609,582,582,537,608,3,540
            .word 3,582,543,3,3,546,583,583,549,608
            .word 3,552,3,583,555,3,3,558,585,585
            .word 561,607,3,564,3,585,567,3,3,570
            .word 589,589,573,608,3,576,3,589,579,3
            .word 3,582,0,0,585,0,3,588,3,0
            .word 591,3,3,594,823,607,597,823,608,600
            .word 825,606,603,3,3,531,0,0,0,742
            .word 3,612,3,774,615,3,3,618,779,779
            .word 621,776,777,627,779,779,630,823,779,630
            .word 709,709,633,779,3,636,3,709,639,3
            .word 3,642,710,710,645,778,3,648,3,710
            .word 651,3,3,654,709,710,660,3,3,666
            .word 823,710,666,3,3,711,678,678,669,688
            .word 688,672,693,678,675,693,688,678,13,-1
            .word 681,823,678,684,823,688,687,824,13,694
            .word 3,3,678,-13,708,708,697,23,3,700
            .word 3,708,703,3,3,706,3,3,0,0
            .word 0,723,723,714,733,733,717,738,723,720
            .word 738,733,723,16,-1,726,823,723,729,823
            .word 733,732,824,16,739,3,3,723,-16,3
            .word 3,489,3,10,5,5,1,-1,-4,1
            .word -2,5,0,2,5,0,5,-2,1,5
            .word 2,1,-1,32766,0,-1,32767,1,-1,65534
            .word 1,-1,65535,1,744,776,0,0,0,0
            .word 115,98,108,101,95,98,114,97,110,99
            .word 104,0,804,804,795,814,814,798,819,804
            .word 801,819,814,804,20,-1,807,823,804,810
            .word 823,814,813,824,20,820,3,3,804,-20
            .word 3,3,-1,-1,0,1,10
